"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("@liff/consts"),i=require("@liff/util"),r=require("@liff/is-in-client"),t=require("@liff/get-os"),o=require("@liff/get-line-version"),f=require("@liff/native-bridge"),l=function(e,n){return e?"&".concat(e.split("&").filter((function(e){return-1===e.indexOf("is_liff_external_open_window")})).join("&").concat("".concat(n?"#".concat(n):""))):"".concat(n?"#".concat(n):"")};exports.openWindow=function(a){if(!function(n){if(!n||"object"!=typeof n)return!1;var i=n,r=i.url,t=i.external,o=e.__read([typeof r,typeof t],2),f=o[0],l=o[1];return"string"===f&&""!==r&&("undefined"===l||"boolean"===l)}(a))throw i.createLiffError(n.INVALID_ARGUMENT,"Invalid parameters for liff.openWindow()");var c=o.getLineVersion();if(r.isInClient())if(null!==c&&"ios"===t.getOS()&&i.compareVersion(c,"9.19")>=0||!window._liff.postMessage){var u=a.url,d=a.external,s=void 0!==d&&d;window.open(function(n,i){var r,t,o,f,a,c,u,d,s,_;(function(e){return-1!==e.indexOf("#")&&-1!==e.indexOf("?")&&e.indexOf("#")<e.indexOf("?")})(n)||function(e){return-1===e.indexOf("?")&&-1!==e.indexOf("#")}(n)?(u=(r=e.__read(n.split("#"),2))[0],d=void 0===(t=r[1])?"":t,s=(o=e.__read(d.split("?"),2))[0],_=o[1]):(u=(f=e.__read(n.split("?"),2))[0],d=void 0===(a=f[1])?"":a,_=(c=e.__read(d.split("#"),2))[0],s=c[1]);var p=l(_,s);return"".concat(u,"?").concat("is_liff_external_open_window","=").concat(!!i).concat(p)}(u,s))}else f.call("openWindow",a);else window.open(a.url,"_blank")};
