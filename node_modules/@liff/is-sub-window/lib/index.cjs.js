"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@liff/consts"),e=require("@liff/util"),n=require("@liff/store"),i=require("@liff/is-in-client"),o=function(){function t(){}return t.prototype.invoke=function(){return e.isSubWindow()},t}(),r=function(){function i(t){this.storage=t}return Object.defineProperty(i,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),i.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(t.SUB_WINDOW_IDNTIFICATION_KEY)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},i.prototype.getInSubWindow=function(){var e=this.storage.getItem("".concat(t.STORE_KEY,":").concat(this.getLiffId(),":").concat(i.IN_SUB_WINDOW_KEY));return null!==e&&JSON.parse(e)},i.prototype.getSubWindowIdentifier=function(){var t,e,n="liff.subwindow.identifier",i=new URLSearchParams(window.location.search);return i.get(n)||(t=n,(e=i.get("liff.state"))?new URLSearchParams(e).get(t):null)||null},i.prototype.setInSubWindow=function(e){this.storage.setItem("".concat(t.STORE_KEY,":").concat(this.getLiffId(),":").concat(i.IN_SUB_WINDOW_KEY),String(e))},i.prototype.getLiffId=function(){var i=n.getConfig().liffId;if(!i)throw e.createLiffError(t.INVALID_CONFIG,"liffId is necessary for liff.init()");return i},i}(),u=function(){function t(){i.isInClient()?this.impl=new o:this.impl=new r(window.sessionStorage)}return Object.defineProperty(t.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),t.prototype.install=function(){return this.impl.invoke.bind(this.impl)},t}(),f=new u,s=f.install();exports.IsSubWindowModule=u,exports.isSubWindow=s,exports.module=f;
